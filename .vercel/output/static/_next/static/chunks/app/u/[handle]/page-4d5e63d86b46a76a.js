(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{63:(e,t,n)=>{"use strict";var s=n(7260);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSelectedLayoutSegments")&&n.d(t,{useSelectedLayoutSegments:function(){return s.useSelectedLayoutSegments}})},826:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u,dynamic:()=>i,runtime:()=>c});var s=n(5155);async function a(e){let{handle:t,className:n=""}=e,[a,o]=await Promise.all([fetch("/api/followers?handle=".concat(encodeURIComponent(t)),{cache:"no-store"}),fetch("/api/following?handle=".concat(encodeURIComponent(t)),{cache:"no-store"})]);if(!a.ok||!o.ok)return(0,s.jsx)("div",{className:"text-xs text-red-500 ".concat(n),children:"error loading counts"});let r=await a.json(),l=await o.json(),c=Array.isArray(r.followers)?r.followers.length:0,i=Array.isArray(l.following)?l.following.length:0;return(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm ".concat(n),children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:c})," Followers"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:i})," Following"]})]})}var o=n(2115),r=n(63);function l(e){let{creatorId:t,initiallyFollowing:n,size:a="md"}=e,[l,c]=(0,o.useState)(n),[i,u]=(0,o.useTransition)(),d=(0,r.useRouter)();async function h(){let e=!l;c(e);try{let n=await fetch("/api/follows?creator_id=".concat(encodeURIComponent(t)),{method:e?"POST":"DELETE",headers:{"content-type":"application/json"}});if(!n.ok)throw Error(await n.text().catch(()=>"Request failed"));u(()=>d.refresh())}catch(t){c(!e),console.error("follow toggle failed",t)}}return(0,s.jsx)("button",{onClick:h,disabled:i,className:["rounded-xl font-medium transition","sm"===a?"h-8 text-sm px-3":"lg"===a?"h-12 text-base px-5":"h-10 text-sm px-4",l?"bg-neutral-200 hover:bg-neutral-300":"bg-black text-white hover:opacity-90",i?"opacity-60 cursor-not-allowed":""].join(" "),"aria-pressed":l,"aria-busy":i,children:i?"â€¦":l?"Following":"Follow"})}let c="edge",i="force-dynamic";function u(){let e=(0,r.useParams)(),t="string"==typeof(null==e?void 0:e.handle)?e.handle:"";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{}),(0,s.jsx)(a,{handle:t,className:"mt-2"}),(0,s.jsx)("div",{className:"p-4 text-white",children:(0,s.jsxs)("h1",{className:"text-2xl font-semibold",children:["User ",(0,s.jsxs)("span",{className:"font-mono",children:["/u/",t]})]})})]})}(0,s.jsx)(a,{handle:handle,className:"mt-2"}),(0,s.jsx)(a,{handle:handle,className:"mt-2"})},955:(e,t,n)=>{Promise.resolve().then(n.bind(n,826))}},e=>{e.O(0,[441,255,358],()=>e(e.s=955)),_N_E=e.O()}]);